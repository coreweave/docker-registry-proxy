---
# This file was originally generated by a template in:
# https://github.com/coreweave/k8s-infrastructure-ansible/blob/master/roles/administrative_tasks/templates/new_zone/values-base-storage.yaml.j2
clusterSpec:
  networkAllocations:
    externalLbCIDRs:
      cw-mgmt: "10.80.108.0/27"
      public: "166.19.18.0/26"
  apiserver:
    addtlUrl: api-cw-mgmt.coreweave-storage.k8s.us-east-04a.int.coreweave.com

applications:
  calico:
    valuesMerge:
      typha:
        enabled: false # Disable typha since these clusters are small and don't need the extra overhead
  cockroachdb-operator:
    enabled: true
    path: apps/data-platforms/cockroachdb-operator
    project: data-platforms
    namespace: cockroach-operator-system
    valueFiles:
      - values-us-east-04a-storage.yaml
  cockroachdb-object-index:
    enabled: true
    path: apps/data-platforms/cockroachdb-cluster
    class: crdb
    project: data-platforms
    namespace: data-platforms-crdb-object-index
    valueFiles:
      - values-us-east-04a-storage-object-index.yaml
  control-plane:
    valuesMerge:
      etcd-events:
        replicaCount: 3
      etcd-local:
        replicaCount: 3
      kubeception:
        apiserver:
          service:
            loadBalancerIP: 172.27.80.13
            addtlLocalService:
              loadBalancerIP: 10.80.104.13
      pki:
        apiServer:
          ipSans:
            - 127.0.0.1
            - 172.27.80.13
            - 10.80.104.13
            - 172.30.0.1
  cw-node-controller:
    valuesMerge:
      nodeLifeCycle:
        applyTaints: false
  in-cluster-config:
    valuesMerge:
      clusterInfo:
        certificateAuthorityData: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURiekNDQWxlZ0F3SUJBZ0lRTSsyQkVIYUNQakd5OURPb3VDNHMyVEFOQmdrcWhraUc5dzBCQVFzRkFEQkMKTVJJd0VBWURWUVFLRXdsRGIzSmxWMlZoZG1VeEZ6QVZCZ05WQkFzVERrbHVabkpoYzNSeWRXTjBkWEpsTVJNdwpFUVlEVlFRREV3cExkV0psY201bGRHVnpNQjRYRFRJMU1ERXhNREUyTURJd01Gb1hEVE0wTVRFeE9URTJNREl3Ck1Gb3dRakVTTUJBR0ExVUVDaE1KUTI5eVpWZGxZWFpsTVJjd0ZRWURWUVFMRXc1SmJtWnlZWE4wY25WamRIVnkKWlRFVE1CRUdBMVVFQXhNS1MzVmlaWEp1WlhSbGN6Q0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQwpBUW9DZ2dFQkFLbTNFUmcyaFZqUGdSWmVlM3JtVnBTc1o1QU43aXpYUXFGRmF0cUgxWmthUmJyTUUwdnZrZTlyClFxSXgwOWYxNVJVbDVHYU5sZU1jTFd0S1E1ajdpTnpoU3JCL0w4U0JzYTZibEI0YitMZTlqS2xFRERiWWU4dGcKSlB0M2xMZmxJVVRpNWVLODNBeHVGa2ZJMElXTklOVXZub3JISXFqNm13MHZ4aXFjVXh4c3VybGdIL3JIM1lZQgpvSGx1eTNJcmpzZlRBKzZEaFBZNHplK1drcGlYUzRqeittUncxVlBZTytmck01OEh0eURidnZBaFJIV0F5enJPCjh1RVJOS0JDbE5mOHBXQnhrTVVmUGQ5dURQNXBHbG9tKzBQNDRlN05ubXp5SmxwS0ZBN0VYTmhUc3RHWXRONDUKRUhpYTNCSGt1V0JPTURtZ0RWYUpiaTd2VEdvQm4xVUNBd0VBQWFOaE1GOHdEZ1lEVlIwUEFRSC9CQVFEQWdLawpNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWpBUEJnTlZIUk1CQWY4RUJUQURBUUgvCk1CMEdBMVVkRGdRV0JCVEtJemg2RjN6NEdTdHRqVWNQOG1BbkhLRWNlVEFOQmdrcWhraUc5dzBCQVFzRkFBT0MKQVFFQUd6cHR0L0tXOUN3RlJUVGgrR3czejJ1dUtYaFBKaDBPZnU0S1hBS1BVOVF1VDRlTy82YjBjRzh2QTdzeQpLRy9CYXJqYzNNYUY4R2FBNzhaUXpIOHFHZlhtQzNIMGFkZ01INmhVK3BVRUJGVzFKcW4vRU8vMEJPcUh1eFpGCkF1Y2xTREZBaGtuSFRSSWNqTjErdzJaRDZtalNqRkRpdy8xekN4a25MZ3YvT3lPeXNud1N1Nkl2ZjJ4dEdvL0IKcHFrMlhRVzBiVDJPeHl2VnZHc2JONFNOQVZSbkdKTlk3OXJEYmJIMzlOMUtqN0tYd3VIRVBaNk9hSk9xQnczQgo2QmhNUXRtUkZETmE1eTZHTGh5VUluVEhoVjFiYnQxOFVVeVF6VE4wWGYrZXR2Tk9SQlVkLzVTMVdobUMyTE14CnRRb2VtTUZCcThMQ0JuSEx2dTdJWjlEbE9nPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
      kubeletConfigOverrides:
        maxPods: 256
  jwks-auth-push:
    enabled: true
  regproxy:
    enabled: false  # Is this really needed in a storage cluster?
    valuesMerge:
      regproxy:
        dev: true
  topolvm-csi:
    enabled: true
    valueFiles:
      - values-us-east-04a-storage.yaml
  node-local-dns:
    valuesMerge:
      vast:
        enabled: true
        backends:
          - name: storage-backend01
            ip: 100.121.1.21
      storeweaveInternal:
        enabled: true
  npo:
    enabled: false
  npo-cfg:
    enabled: false
  pvmo:
    valuesMerge:
      monitoring:
        enabled: true
        serviceAccount:
          name: vmagent-us-east-04-coreweave-us-east-04-internal
          namespace: victoria-metrics
